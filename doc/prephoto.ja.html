<html>
<head>
<meta http-equiv="Content-Language" content="ja">
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<title>Tutorial</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<h1>画像の準備</h1>

まず、Photo Scenery Maker で使用する写真画像を準備します。
全工程のうち、この工程がもっとも困難かつ時間がかかります。
おそらく、全工程の 95% 以上の時間を費やすことになるでしょう。

<h2>画像の入手</h2>

まず、写真画像を入手しなければなりません。写真画像は、垂直に撮影されたゆがみのない
カラーの空中写真または衛星写真が必要になります。
<p>

写真画像は、およそ 4.8m/pixel 程度の解像度が必要になります。これに適した空中写真を
購入するなどし、スキャナを使って PC に取り込んでください。
<p>

空中写真は、空中写真のベンダを探して購入することになります。
日本の場合、国土地理院や民間のベンダから購入可能です。
<p>
ただし、一般に空中写真はかなり高価です。空港１つぶん程度であればそれほどでも
ありませんが、大都市近郊をまとめて購入するのは困難かもしれません。
<p>

<h2>画像の補正</h2>

画像が比較的狭い範囲(空港１つぶん程度）ならそれほど問題ありませんが、
画像が大きい（大都市一つ分程度、数10km四方以上）の場合は画像の補正が
必要になります。
<p>

写真画像がオルソ補正されているのでなければ、地形図などを入手し、これを
下絵として写真画像を補正する必要があります。Photo Shop や Paint Shop Pro
などのレイヤ機能を使い、地形図を下絵にして補正をかけてください。
<p>

なお、下絵にする地形図には注意が必要です。通常、地形図は UTM(ユニバーサル横
メルカトル図法)などの投影図法を使っていますが、
Photo Scenery Maker に必要な画像は、「非投影図法(Unprojected Maps)」
に従っている必要があります。これは、緯度と経度をそのまま単純な直交座標系
にマップしたものです(下図)
<p>

<center>
<img src="unproj.gif" width="540" height="341"><br>
"<a href="http://www.colorado.edu/geography/gcraft/notes/mapproj/mapproj.html">Map Projection Overview</a>", Peter H. Dana より引用
</center>
<p>

この図法は以下のようになっています。
(メルカトル図法に似ています、4. の条件が異なっています。)

<ol>
<li>東西方向が正確に画像の横軸とあっている
<li>南北方向が正確に画像の縦軸とあっている
<li>経線/緯線が直線で、経線が垂直線、緯線が水平線になっている
<li>解像度(<b>ピクセルあたりの角度</b>)が均一であること
</ol>

<p>

地球は球体ですので、写真画像は高緯度になるほど経線の間隔は狭くなり、緯線は曲線に
近くなってきます。このため、非投影図法に合うよう、画像ソフトを使って
下絵となる地形図のほうを修正しておき、これに合わせて写真画像を補正してください。
<p>


<h2>アルファ（水面）ビットマップ</h2>

水面（海や川など）のテクスチャを「くり抜き」たいのであれば、アルファビットマップを
作成する必要があります。
<p>
この画像は、地上を白、水面を黒で描画した画像です。
Custom Terrain Texture SDK にサンプルがありますので、参考にしてください。

<p>
<h2>画像フォーマット</h2>

最終的に、画像のフォーマットは、24bit フルカラーの BMP ファイルとして用意してください。
<p>
季節毎に画像を切り替えたい場合や夜間のフォトを作成する場合、
春・夏・秋・冬・厳冬・夜間の６枚の画像全てが必ず必要です。
通常、空中写真として入手可能な画像は１枚だけなので、他の季節や夜間のフォトは
画像ソフトを使って手動で作成しなければなりません。
<p>

また、水面のテクスチャをくりぬきたい場合は、アルファテクスチャが必要です。
<p>

画像の解像度は、南北方向に 4.8m/pixel 程度必要です。東西方向も同程度（
正確には 6.4 * cos(緯度) m/pixel）の解像度が必要です。

</body>
</html>
